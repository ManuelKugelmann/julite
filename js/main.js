var pg_init =(function(jQuery,SVG){

  jQuery(document).on("pageinit", function(event){
  	// custom code goes here
  });

  function luxAtD(lux, luxD, D) {
      var f = luxD/D;
      return Math.round(f*f*lux);
  }

  var heightRefStrokePath="m 295.57597,542.77034 -31.66,0.07 c 0.281,-1.331 0.494,-2.471 0.595,-3.271 0.46,-3.84 1.57,-50.74 1.57,-60.59 0,-0.96 -0.01,-1.54 -0.03,-1.79 -0.25,-1.99 -2,-2.28 -2.59,-2.25 -0.11,0 -0.189,0.01 -0.24,0.01 -0.59,0 -10.89,-0.03 -12.63,-0.03 -0.3,0 -0.569,0.01 -0.83,0.03 h -0.02 c -2.772,-0.04 -26.095,-0.05 -56.833,-0.06 -0.016,-1.023 -0.027,-1.881 -0.027,-2.45 v -0.03 c 0,-0.74 -0.35,-1.33 -0.86,-1.63 -0.52,-0.31 -1.11,-0.37 -1.71,-0.38 -0.85,0 -1.73,0.16 -2.34,0.21 -0.81,0.07 -4.53,0.77 -9.19,1.5 -4.67,0.73 -10.28,1.49 -14.86,1.69 -0.48,0.02 -1.04,0.03 -1.66,0.03 -2.7,0 -6.5,-0.18 -9.92,-0.39 -3.41,-0.21 -6.44,-0.45 -7.57,-0.57 -0.89,-0.09 -1.71,-0.28 -2.45,-0.28 -0.53,0 -1.09,0.11 -1.49,0.55 -0.364,0.419 -0.513,0.996 -0.532,1.759 h -1.006 c -0.023,-0.355 -0.071,-0.756 -0.166,-1.144 -0.08,-0.38 -0.25,-0.79 -0.53,-1.11 -0.28,-0.32 -0.67,-0.55 -1.2,-0.55 -0.04,0 -0.11,0 -0.18,0.01 -0.78,0.07 -6.13,0.79 -12.43,1.55 -3.753,0.453 -7.844,0.912 -11.511,1.254 -5.781,0.002 -11.472,0.005 -17.022995,0.007 -1.812,-0.173 -3.355,-0.347 -4.267,-0.451 -1.14,-0.12 -2.27,-0.37 -3.2,-0.37 -0.46,0 -0.91,0.06 -1.29,0.31 -0.192,0.124 -0.342,0.303 -0.446,0.516 -0.798,0 -1.593,10e-4 -2.383,10e-4 v -1.046 c -0.06,-1.19 -1.24,-1.75 -2.58,-1.75 h -0.04 c -0.2,0 -0.4,0.01 -0.61,0.03 -0.79,0.08 -5.65,0.47 -11.5,0.94 -5.85,0.47 -12.71,1.01 -17.47,1.37 -1.07,0.08 -2.14,0.12 -3.18,0.12 -3.08,0 -5.95,-0.31 -8.34,-0.65 -2.4,-0.34 -4.32,-0.71 -5.5,-0.81 -0.22,-0.02 -0.43,-0.03 -0.63,-0.03 -0.93,0 -1.68,0.22 -2.2,0.71 -0.323,0.311 -0.516,0.709 -0.623,1.149 -2.275,0.002 -4.195,0.004 -5.654,0.005 h -1.34 l -8.62,-0.01 h -0.06 c -0.26,-0.02 -0.53,-0.03 -0.83,-0.03 -1.75,0 -12.0400002,0.03 -12.6200002,0.04 -0.05,-0.01 -0.14,-0.02 -0.25,-0.02 -0.59,-0.03 -2.35,0.26 -2.58,2.25 -0.03,0.26 -0.04000000473,0.86 -0.04000000473,1.87 0,10.03 1.10000000473,56.68 1.58000000473,60.51 0.52,4.19 4.1,17.7 4.63,19.31 0.26,0.771 0.45,1.32 0.79,1.75 0.32,0.431 0.85,0.641 1.41,0.641 h 1.8700002 v 9.89 l 0.05,0.101 c 0.08,0.21 0.64,0.939 2.57,0.93 h 0.11 c 1.82,0 2.31,-0.75 2.35,-1.021 l 0.02,-0.06 v -9.84 h 5.65 c 0.76,-0.03 1.19,-0.58 1.49,-1.17 0.08,0.479 0.42,0.859 0.79,1 0.43,0.18 0.89,0.2 1.31,0.2 0.43,0 0.82,-0.03 1.03,-0.03 H 182.78497 l 0.071,10.819 3.75,2.681 h 6.35 l 0.3,-13.5 h 11.796 l 0.174,27.03 3.77,2.859 h 9.221 l -0.34,-28.7 31.304,-0.163 v 8.823 l 0.021,0.061 c 0.05,0.26 0.54,1 2.35,1 h 0.12 c 1.93,0.02 2.49,-0.71 2.57,-0.92 l 0.05,-0.101 v -8.89 l 34.796,-0.181 0.069,10.16 3.62,2.38 0.09,0.061 0.13,0.08 5.601,-0.141 -0.19,-12.6 18.88,-0.1 v 0.029 h 0.13 l 0.101,25.92 4.87,3.29 h 8.14 l 0.33,-37.77 -35.283,-10.627 z m -45.825,-66.82 h 0.021 c 0.05,0.01 0.14,0 0.18,0 v -0.01 c 0.189,-0.02 0.399,-0.02 0.64,-0.02 1.79,0 12.641,0.04 12.65,0.04 h 0.04 l 0.029,-0.01 c 0,0 0.051,-0.01 0.15,-0.01 0.49,0.04 1.42,0.08 1.59,1.37 0.021,0.1 0.03,0.73 0.03,1.67 0,9.77 -1.11,56.82 -1.56,60.46 -0.101,0.803 -0.327,1.998 -0.627,3.402 l -22.318,0.05 c -1.892,-8.549 -3.978,-17.893 -4.266,-18.902 -0.02,-0.08 -0.039,-0.15 -0.05,-0.2 -0.05,-0.22 -0.069,-0.44 -0.069,-0.67 -0.011,-1.32 0.75,-2.89 1.239,-4.52 0.971,-3.28 10.16,-39.18 10.66,-40.97 0.461,-1.38 0.661,-1.51 1.661,-1.68 z m -8.47,0.07 v -0.1 c 2.8,0 5,0.01 6.49,0.01 -0.28,0.38 -0.5,0.85 -0.641,1.43 -0.51,1.82 -9.71,37.73 -10.66,40.96 -0.34,1.16 -0.899,2.38 -1.149,3.64 -0.53,-0.77 -1.24,-1.35 -1.99,-1.97 -1.29,-1.05 -2.37,-1.89 -3.11,-2.55 -0.76,-0.66 -1.08,-1.19 -1.04,-1.33 v -0.04 c 0.011,-0.02 0.021,-0.06 0.021,-0.1 0.04,-0.09 0.07,-0.18 0.09,-0.27 l -0.02,-0.01 c 0.96,-3.7 10.029,-36.69 10.359,-37.49 0.36,-1.01 1.01,-2.28 1.65,-2.18 z m -14.52,41.31 h 0.101 c 0.449,0 1.08,-0.05 1.6,-0.39 0.24,0.41 0.62,0.8 1.09,1.24 0.79,0.71 1.87,1.54 3.15,2.59 0.95,0.78 1.64,1.35 2.08,2.23 -0.561,-0.2 -1.28,-0.26 -2.12,-0.27 -0.14,0 -0.28,0.01 -0.42,0.01 -1.521,0.03 -50.39,0.05 -99.23,0.05 -48.849995,0 -97.719995,-0.02 -99.239995,-0.05 -0.14,0 -0.28,-0.01 -0.42,-0.01 -0.69,0.01 -1.3,0.05 -1.8,0.18 0.45,-0.83 1.11,-1.38 2.03,-2.14 0.925,-0.759 1.74,-1.405 2.422,-1.974 0.377,0.165 0.834,0.25 1.395,0.25 0.38,0 0.81,-0.03 1.31,-0.1 1.62,-0.24 6.56,-0.6 11.89,-0.91 5.32,-0.31 11.03,-0.57 14.2,-0.62 0.42,-0.01 0.87,-0.01 1.33,-0.01 h 0.15 c 6.34,0 15.42,0.62 17.43,0.96 0.58,0.1 1.11,0.17 1.6,0.17 0.66,0 1.29,-0.13 1.76,-0.57 0.228,-0.223 0.386,-0.496 0.493,-0.812 0.594,10e-4 1.192,0.002 1.793,0.002 0.051,0.522 0.171,1.056 0.454,1.539 0.39,0.69 1.18,1.19 2.26,1.19 h 0.17 c 0.17,0 0.34,-0.02 0.53,-0.04 1.61,-0.21 6.39,-1.02 11.519995,-1.78 2.177,-0.317 4.413,-0.627 6.5,-0.88 7.748,0.01 15.705,0.021 23.658,0.031 1.941,0.128 3.422,0.262 4.022,0.378 0.38,0.07 0.73,0.11 1.06,0.11 0.595,0 1.145,-0.154 1.564,-0.48 0.789,10e-4 1.576,0.002 2.363,0.003 0.024,0.043 0.04,0.09 0.067,0.132 0.38,0.59 1.09,0.97 2.03,0.97 h 0.04 c 0.19,0 0.39,-0.01 0.6,-0.04 1.197,-0.149 4.125,-0.574 7.647,-1.049 38.784,0.05 72.589,0.09 72.921,0.09 z m -65.04,-1.079 c 3.748,-0.426 7.292,-0.751 9.521,-0.751 3.04,0 8.16,0.3 12.79,0.65 0.566,0.043 1.125,0.087 1.673,0.131 -7.445,-0.009 -15.541,-0.019 -23.984,-0.03 z m 77.95,-40.341 c -0.479,0.62 -0.74,1.41 -0.97,1.92 -0.41,1.05 -9.73,34.99 -10.45,37.84 -0.229,0.57 -0.79,0.65 -1.49,0.66 -0.192,0 -12.204,-0.014 -30.058,-0.036 0.167,-0.333 0.248,-0.735 0.248,-1.204 0,-0.81 -0.2,-1.86 -0.64,-3.29 -0.66,-2.15 -3.18,-19.34 -3.18,-23.25 0,0 0,-0.01 0,-0.02 0,-2 -0.06,-5.33 -0.13,-8.51 -0.028,-1.458 -0.055,-2.878 -0.077,-4.13 19.863,0 36.637,0.01 46.747,0.02 z m -98.1,-2.1 c 0.13,-0.14 0.33,-0.22 0.75,-0.22 0.56,0 1.39,0.17 2.35,0.28 1.16,0.11 4.19,0.35 7.61,0.57 3.43,0.21 7.24,0.39 9.98,0.39 0.63,0 1.2,-0.01 1.7,-0.03 4.64,-0.2 10.3,-0.97 14.98,-1.7 4.69,-0.73 8.4,-1.43 9.12,-1.49 0.68,-0.06 1.52,-0.21 2.25,-0.21 0.51,0 0.95,0.08 1.19,0.23 0.23,0.16 0.36,0.31 0.38,0.81 0,0.574 0.01,1.431 0.026,2.45 0.001,0.048 0.002,0.104 0.002,0.153 0.004,0.256 0.008,0.519 0.013,0.794 0,0.019 0,0.035 0.001,0.053 0.022,1.26 0.049,2.69 0.077,4.16 0.07,3.17 0.13,6.49 0.13,8.48 0.01,2.06 0.63,7.34 1.35,12.41 0.71,5.08 1.52,9.94 1.88,11.15 0.41,1.38 0.59,2.36 0.59,3 -0.05,0.54 -0.1,0.8 -0.23,0.93 -0.14,0.14 -0.36,0.14 -0.74,0.19 -0.27,0 -0.6,-0.04 -0.98,-0.11 -1.13,-0.2 -5.27,-0.6 -9.9,-0.95 -4.63,-0.35 -9.76,-0.65 -12.86,-0.65 -3.12,0 -8.61,0.6 -13.72,1.25 -1.288,0.164 -2.551,0.33 -3.747,0.491 h -10e-4 c -0.261,0.035 -0.513,0.069 -0.766,0.104 -0.034,0.004 -0.068,0.009 -0.101,0.014 -2.738,0.373 -5.033,0.702 -6.312,0.873 h 0 c -0.197,0.026 -0.377,0.05 -0.524,0.068 -0.18,0.02 -0.34,0.03 -0.48,0.03 -0.25,-0.011 -0.446,-0.049 -0.62,-0.1 -0.141,-0.042 -0.259,-0.097 -0.36,-0.163 -0.008,-0.006 -0.019,-0.011 -0.027,-0.017 -0.1,-0.07 -0.182,-0.152 -0.244,-0.25 -0.049,-0.079 -0.088,-0.166 -0.12,-0.261 -0.032,-0.095 -0.057,-0.198 -0.076,-0.309 -0.042,-0.232 -0.063,-0.499 -0.083,-0.8 0,-0.59 0.09,-1.21 0.14,-1.72 0.01,-0.25 0.02,-1.05 0.03,-2.32 0,-3.57 -0.1,-10.67 -0.42,-17.16 -0.19,-3.9 -0.7,-7.59 -1.21,-10.71 -0.51,-3.12 -1.02,-5.66 -1.23,-7.28 -0.014,-0.128 -0.021,-0.235 -0.032,-0.352 -0.012,-0.138 -0.022,-0.27 -0.031,-0.396 -0.009,-0.153 -0.017,-0.303 -0.017,-0.433 0.002,-0.739 0.142,-1.099 0.282,-1.249 z m -1.235,2.089 c 0.013,0.15 0.025,0.297 0.045,0.461 0.42,3.34 2.05,10.21 2.43,17.92 0.31,6.17 0.41,12.92 0.41,16.61 v 1.17 c 0,0.88 -0.01,1.45 -0.02,1.57 -0.04,0.45 -0.14,1.11 -0.14,1.8 0,0.263 0.021,0.532 0.061,0.798 -0.45,0 -0.899,-10e-4 -1.35,-10e-4 0.167,-0.455 0.245,-0.979 0.245,-1.592 0,-0.16 0,-0.31 -0.01,-0.47 -0.06,-1.27 -0.52,-6.09 -0.95,-11.12 -0.43,-5.03 -0.85,-10.25 -0.85,-12.3 0,-4.076 -0.84,-13.542 -0.886,-14.846 h 1.015 z m -51.547995,-0.804 c 0.76,0 1.89,0.23 3.09,0.36 1.15,0.12 3.26,0.37 5.68,0.58 2.43,0.22 5.149995,0.4 7.509995,0.41 0.56,0 1.11,-0.01 1.62,-0.04 1.863,-0.084 4.161,-0.264 6.649,-0.497 h 0 c 0.006,0 0.012,-0.001 0.018,-0.001 2.234,-0.209 4.621,-0.461 6.994,-0.729 0.008,-10e-4 0.016,-0.002 0.024,-0.003 1.537,-0.173 3.068,-0.353 4.544,-0.53 6.31,-0.76 11.66,-1.48 12.41,-1.55 0.02,0 0.04,-0.01 0.07,-0.01 0.36,0 0.57,0.27 0.76,0.92 0.074,0.283 0.112,0.598 0.133,0.895 0.025,0.342 0.027,0.661 0.027,0.875 0,0.9 0.89,10.72 0.89,14.9 v 0.07 c 0,2.11 0.42,7.36 0.86,12.39 0.43,5.03 0.88,9.84 0.94,11.08 0.01,0.14 0.01,0.28 0.01,0.42 -0.047,0.802 -0.134,1.286 -0.328,1.59 -0.011,0.018 -0.02,0.042 -0.032,0.06 -0.23,0.29 -0.57,0.39 -1.13,0.42 -0.25,0 -0.54,-0.03 -0.87,-0.1 -0.078,-0.014 -0.17,-0.029 -0.271,-0.043 -0.025,-0.004 -0.056,-0.008 -0.083,-0.011 -0.081,-0.012 -0.166,-0.023 -0.259,-0.034 -0.032,-0.004 -0.066,-0.008 -0.1,-0.012 -0.099,-0.012 -0.202,-0.023 -0.312,-0.035 -0.033,-0.003 -0.066,-0.007 -0.1,-0.01 -0.12,-0.013 -0.247,-0.025 -0.38,-0.038 -0.031,-0.003 -0.061,-0.006 -0.092,-0.009 -0.146,-0.014 -0.3,-0.027 -0.459,-0.042 -0.022,-0.002 -0.043,-0.004 -0.065,-0.006 -0.562,-0.048 -1.2,-0.097 -1.899,-0.145 -0.009,-10e-4 -0.017,-10e-4 -0.026,-0.002 h -0.001 c -1.426,-0.097 -3.094,-0.191 -4.853,-0.272 -4.12,-0.2 -8.73,-0.34 -11.82,-0.34 -2.46,0 -6.4,0.44 -10.474,0.997 l -0.072,0.01 c -1.084,0.148 -2.176,0.303 -3.254,0.462 -5.149995,0.76 -9.909995,1.58 -11.499995,1.78 -0.19,0.02 -0.36,0.03 -0.51,0.03 -0.86,-0.01 -1.2,-0.28 -1.46,-0.7 -0.166,-0.268 -0.257,-0.633 -0.305,-1.029 -0.027,-0.224 -0.045,-0.456 -0.045,-0.691 0,-0.42 0.03,-0.83 0.06,-1.18 0.02,-0.21 0.04,-0.68 0.05,-1.36 0.01,-0.68 0.02,-1.57 0.02,-2.65 0,-3.07 -0.07,-7.57 -0.32,-12.48 -0.23,-4.42 -0.59,-9.14 -0.99,-13.23 -0.4,-4.1 -0.83,-7.56 -1.2,-9.45 -0.014,-0.077 -0.014,-0.13 -0.022,-0.196 -0.011,-0.079 -0.027,-0.169 -0.027,-0.234 0.06,-0.54 0.099,-0.51 0.9,-0.59 z m -4.12,0.826 c 0.745,0 1.494,-10e-4 2.246,-10e-4 0.012,0.126 0.019,0.249 0.043,0.385 0.71,3.66 1.72,13.76 2.17,22.54 0.12,2.45 0.2,4.79 0.25,6.91 0.05,2.11 0.07,4 0.07,5.52 0,1.06 -0.01,1.96 -0.02,2.64 -0.01,0.67 -0.02,1.12 -0.04,1.29 -0.023,0.271 -0.047,0.604 -0.06,0.954 -0.539,0 -1.076,-0.001 -1.61,-0.002 0.002,-0.055 0.01,-0.104 0.01,-0.161 0,-0.15 -0.01,-0.3 -0.01,-0.45 -0.09,-1.28 -0.83,-7.92 -1.55,-14.76 -0.72,-6.84 -1.43,-13.88 -1.46,-15.95 -0.04,-2.1 -0.04,-4.61 -0.04,-6.71 v -2.205 z m -51.63,-0.966 c 0.062,-0.171 0.143,-0.316 0.26,-0.429 0.28,-0.27 0.75,-0.39 1.52,-0.43 0.17,0 0.35,0.01 0.54,0.02 1.1,0.1 3.02,0.47 5.44,0.81 0.642,0.09 1.322,0.177 2.028,0.258 0.136,0.016 0.283,0.028 0.42,0.043 0.523,0.057 1.05,0.114 1.602,0.161 0.332,0.028 0.681,0.045 1.022,0.068 0.38,0.026 0.751,0.057 1.141,0.075 0.744,0.035 1.503,0.055 2.277,0.055 1.06,0 2.15,-0.04 3.25,-0.12 4.77,-0.37 11.62,-0.91 17.48,-1.37 5.85,-0.47 10.71,-0.86 11.52,-0.94 0.18,-0.02 0.35,-0.03 0.51,-0.03 0.57,0 1.02,0.12 1.28,0.28 0.26,0.16 0.33,0.3 0.34,0.48 v 4.24 c 0,2.1 0.01,4.62 0.04,6.72 0.04,2.14 0.74,9.21 1.47,16.05 0.72,6.84 1.45,13.46 1.54,14.71 0,0.14 0.01,0.27 0.01,0.39 -0.004,0.06 -0.011,0.104 -0.016,0.16 -0.045,0.498 -0.121,0.806 -0.257,0.997 -0.022,0.031 -0.041,0.068 -0.067,0.094 -0.21,0.2 -0.54,0.24 -1.08,0.29 -0.4,0 -0.88,-0.06 -1.43,-0.15 -0.587,-0.097 -1.689,-0.214 -3.096,-0.333 -0.067,-0.006 -0.136,-0.012 -0.204,-0.017 -0.303,-0.025 -0.617,-0.05 -0.945,-0.075 -0.11,-0.009 -0.219,-0.017 -0.333,-0.025 -0.315,-0.023 -0.642,-0.046 -0.976,-0.069 -0.114,-0.008 -0.225,-0.016 -0.341,-0.023 -0.45,-0.03 -0.91,-0.059 -1.385,-0.087 -3.36,-0.2 -7.25,-0.35 -10.47,-0.36 -0.47,0 -0.92,0.01 -1.35,0.02 -3.21,0.05 -8.91,0.31 -14.24,0.63 -5.33,0.31 -10.28,0.67 -11.97,0.91 -0.46,0.06 -0.85,0.09 -1.17,0.09 -0.194,0 -0.361,-0.011 -0.504,-0.03 -0.021,-0.002 -0.035,-0.007 -0.054,-0.01 -0.107,-0.017 -0.202,-0.037 -0.283,-0.061 -0.033,-0.01 -0.062,-0.021 -0.09,-0.031 -0.059,-0.022 -0.113,-0.044 -0.157,-0.069 -0.02,-0.01 -0.041,-0.021 -0.058,-0.032 -0.054,-0.035 -0.101,-0.071 -0.134,-0.106 -0.05,-0.057 -0.089,-0.133 -0.124,-0.219 -0.068,-0.171 -0.106,-0.398 -0.106,-0.711 0,-0.19 0.01,-0.4 0.03,-0.63 0.093,-1.324 0.101,-2.439 0.155,-3.931 0,0 0,0 0,0 0.01,-0.277 0.021,-0.563 0.035,-0.87 0.01,-0.24 0.01,-0.53 0.01,-0.87 0,-0.249 -0.004,-0.534 -0.009,-0.833 -10e-4,-0.07 -0.002,-0.14 -0.004,-0.212 -0.007,-0.312 -0.015,-0.64 -0.027,-0.997 v -0.002 c -0.114,-3.408 -0.461,-8.8 -0.939,-14.285 -0.58,-6.77 -1.35,-13.68 -2.1,-17.17 -0.1,-0.45 -0.15,-0.84 -0.15,-1.18 0.022,-0.348 0.069,-0.62 0.149,-0.844 z m -1.14,0.992 c 0.012,0.388 0.062,0.796 0.16,1.239 0.73,3.4 1.5,10.28 2.09,17.04 0.296,3.457 0.545,6.873 0.719,9.773 -2.985,-10.904 -7.013,-25.485 -7.286,-26.17 -0.23,-0.51 -0.5,-1.27 -0.97,-1.88 1.398,0 3.191,-0.001 5.287,-0.002 z m -6.897,0.003 v 0.07 c 0.64,-0.1 1.29,1.17 1.65,2.18 0.248,0.604 5.477,19.538 8.44,30.403 0.024,0.728 0.037,1.362 0.037,1.873 0,0.33 -0.01,0.61 -0.02,0.83 -0.09,1.98 -0.08,3.24 -0.19,4.77 -0.02,0.23 -0.03,0.47 -0.03,0.7 0,0.457 0.064,0.944 0.333,1.37 -0.64,0.529 -1.406,1.135 -2.27,1.844 -0.83,0.68 -1.6,1.32 -2.15,2.22 -0.22,-1.35 -0.83,-2.65 -1.18,-3.89 -0.97,-3.23 -10.15,-39.14 -10.67,-40.96 -0.14,-0.57 -0.35,-1.04 -0.62,-1.41 h 6.67 z m -10.62,94.95 c -0.11,0.09 -0.47,0.28 -1.48,0.28 -0.86,0 -1.31,-0.15 -1.51,-0.25 -0.05,-0.03 -0.08,-0.051 -0.11,-0.07 v -9.53 h 3.1 v 9.57 z m 7.96,-13.56 c -0.13,0.62 -0.32,1.44 -0.59,2.051 -0.26,0.64 -0.59,0.92 -0.72,0.88 H 8.4809748 c -0.45,-0.021 -0.53,-0.07 -0.7,-0.26 -0.18,-0.21 -0.37,-0.69 -0.62,-1.45 -0.5,-1.471 -4.1,-15.12 -4.59,-19.12 -0.46,-3.63 -1.57,-50.43 -1.57,-60.38 0,-0.98 0.02,-1.64 0.03,-1.75 0.17,-1.29 1.11,-1.33 1.59,-1.37 0.11,0 0.15,0.01 0.16,0.01 h 0.02 l 0.04,0.01 c 0.01,0 8.3200002,-0.03 11.5900002,-0.04 v 0.03 h 1.92 c 0.98,0.17 1.18,0.31 1.64,1.69 0.51,1.78 9.69,37.67 10.67,40.96 0.48,1.63 1.23,3.19 1.22,4.51 0,0.25 -0.02,0.49 -0.07,0.72 -0.02,0.06 -0.03,0.13 -0.04,0.18 -0.52,1.839 -7.17,32.019 -7.43,33.329 z m 160.324995,-14.32 0.113,17.25 H 25.650975 c -0.29,0 -0.66,0.03 -1.03,0.03 -0.36,0.01 -0.72,-0.04 -0.91,-0.12 -0.19,-0.11 -0.2,-0.11 -0.22,-0.311 0,-0.09 0.01,-0.2 0.06,-0.359 0.61,-1.91 7.33,-34.05 7.48,-35.05 0,-0.05 0.01,-0.06 0.01,-0.09 0.04,-0.31 0.64,-0.64 2.24,-0.64 h 0.07 c 0.13,0 0.26,0 0.4,0.01 1.57,0.04 50.4,0.05 99.259995,0.05 48.86,0 97.69,-0.02 99.25,-0.05 0.141,0 0.271,-0.01 0.4,-0.01 1.66,0 2.28,0.33 2.31,0.64 0.011,0.02 0.011,0.04 0.021,0.08 0.073,0.525 1.96,9.634 3.824,18.446 l -56.15,0.124 z m 9.612,17.25 -0.022,1 -0.279,12.5 h -4.71 l 0.154,-12.5 0.013,-1 0.093,-7.51 4.87,2.229 -0.119,5.281 z m 1,0 0.108,-4.86 11.542,4.86 h -11.65 z m 12.949,27.54 -0.18,-26.54 -0.007,-1 -0.004,-0.62 -12.93,-5.44 -6.56,-3 -0.111,9.061 -0.012,1 -0.147,12.03 -2.42,-1.73 -0.072,-10.3 -0.007,-1 -0.111,-16.021 24.88,9.61 0.02,6.41 0.003,1 0.087,28.38 -2.429,-1.84 z m -20.4,-43.79 53.201,-0.121 1.771,-0.004 21.878,-0.05 1.024,-0.003 31.727,-0.072 31.52,9.5 -65.504,-0.139 -1.032,-0.003 -17.586,-0.037 -1.829,-0.004 -31.858,-0.067 -23.312,-9 z m 67.464,26.84 c -0.15,0.11 -0.58,0.32 -1.62,0.32 -0.86,0 -1.26,-0.15 -1.42,-0.24 -0.03,-0.021 -0.05,-0.03 -0.06,-0.04 v -8.608 l 3.1,-0.017 v 8.585 z m 36.855,0.84 -0.06,-9.62 2.51,-0.02 0.04,11.279 -2.49,-1.639 z m 3.491,2.05 -0.04,-11.689 3.81,-0.021 0.181,11.62 -3.951,0.09 z m 24.88,13.6 -0.101,-25.391 3.5,-0.029 0.12,27.8 -3.519,-2.38 z m 11.019,2.82 h -6.5 l -0.12,-29.239 -4.5,0.029 v -0.029 l -20.52,0.109 -4.81,0.021 -3.511,0.02 -31.695,0.17 -8.7,0.047 -32.314,0.174 0.34,28.689 h -7.55 l -0.088,-28.89 -0.003,-1 -0.019,-6.25 31.666,0.065 1.831,0.004 17.105,0.036 1.032,0.002 68.665,0.143 -0.309,35.899 z";
  var heightRefFillPath="m 189.31247,472.7849 c -0.73,0 -1.57,0.1275 -2.25,0.1875 -0.72,0.06 -4.435,0.77 -9.125,1.5 -4.68,0.73 -10.36,1.4875 -15,1.6875 -0.5,0.02 -1.0575,0.0312 -1.6875,0.0312 -2.74,0 -6.53875,-0.165 -9.96875,-0.375 -3.42,-0.22 -6.465,-0.4525 -7.625,-0.5625 -0.96,-0.11 -1.78375,-0.28125 -2.34375,-0.28125 -0.42,0 -0.62,0.0788 -0.75,0.21875 -0.14,0.15 -0.28125,0.51 -0.28125,1.25 0,0.32 0.0438,0.68625 0.0937,1.15625 0.21,1.62 0.70875,4.16125 1.21875,7.28125 0.51,3.12 1.02875,6.81875 1.21875,10.71875 0.32,6.49 0.40625,13.58625 0.40625,17.15625 -0.01,1.27 -0.0212,2.0625 -0.0312,2.3125 -0.05,0.51 -0.125,1.16 -0.125,1.75 0.04,0.59 0.0813,1.02375 0.28125,1.34375 0.2,0.32 0.57,0.50125 1.25,0.53125 0.14,0 0.28875,-0.0113 0.46875,-0.0312 1.6,-0.2 6.3175,-0.88125 11.4375,-1.53125 5.11,-0.65 10.59875,-1.25 13.71875,-1.25 3.1,0 8.245,0.30625 12.875,0.65625 4.63,0.35 8.77625,0.7375 9.90625,0.9375 0.38,0.07 0.69875,0.0937 0.96875,0.0937 0.38,-0.05 0.61,-0.0475 0.75,-0.1875 0.13,-0.13 0.16875,-0.36625 0.21875,-0.90625 0,-0.64 -0.18375,-1.62 -0.59375,-3 -0.36,-1.21 -1.165,-6.07625 -1.875,-11.15625 -0.72,-5.07 -1.33375,-10.34625 -1.34375,-12.40625 0,-1.99 -0.055,-5.33 -0.125,-8.5 -0.06,-3.18 -0.125,-6.19375 -0.125,-7.59375 -0.02,-0.5 -0.145,-0.6525 -0.375,-0.8125 -0.24,-0.15 -0.6775,-0.21875 -1.1875,-0.21875 z m -52.9375,1.65625 c -0.029,0 -0.0415,0.0312 -0.0625,0.0312 -0.75,0.07 -6.09625,0.77125 -12.40625,1.53125 -6.31,0.76 -13.58875,1.57125 -18.21875,1.78125 -0.51,0.03 -1.065,0.0312 -1.625,0.0312 -2.36,-0.01 -5.069995,-0.18625 -7.499995,-0.40625 -2.42,-0.21 -4.5375,-0.47375 -5.6875,-0.59375 -1.2,-0.13 -2.33375,-0.34375 -3.09375,-0.34375 -0.8,0.08 -0.84625,0.0538 -0.90625,0.59375 0,0.12 0.0325,0.23625 0.0625,0.40625 0.37,1.89 0.7875,5.36875 1.1875,9.46875 0.4,4.09 0.77,8.79875 1,13.21875 0.25,4.91 0.3125,9.43 0.3125,12.5 0,1.08 -0.02125,1.945 -0.03125,2.625 -0.01,0.68 -0.01125,1.165 -0.03125,1.375 -0.03,0.35 -0.0625,0.7675 -0.0625,1.1875 0,0.65 0.08375,1.29875 0.34375,1.71875 0.26,0.42 0.60875,0.6775 1.46875,0.6875 0.15,0 0.31,-0.0113 0.5,-0.0312 1.59,-0.2 6.35,-1.02125 11.499995,-1.78125 5.15,-0.76 10.6825,-1.46875 13.8125,-1.46875 3.09,0 7.6925,0.14375 11.8125,0.34375 4.12,0.19 7.75625,0.44625 8.90625,0.65625 0.33,0.07 0.625,0.0937 0.875,0.0937 0.56,-0.03 0.895,-0.11625 1.125,-0.40625 0.22,-0.3 0.29375,-0.80625 0.34375,-1.65625 0,-0.14 0.01,-0.26625 0,-0.40625 -0.06,-1.24 -0.5075,-6.06375 -0.9375,-11.09375 -0.44,-5.03 -0.875,-10.265 -0.875,-12.375 l 0,-0.0937 c 0,-4.18 -0.875,-13.975 -0.875,-14.875 0,-0.4 0.004,-1.17125 -0.15625,-1.78125 -0.19,-0.65 -0.42125,-0.9375 -0.78125,-0.9375 z m -55.343745,0.0625 c -0.16,0 -0.32,0.0112 -0.5,0.0312 -0.81,0.08 -5.68125,0.4675 -11.53125,0.9375 -5.86,0.46 -12.69875,1.005 -17.46875,1.375 -1.1,0.08 -2.19,0.125 -3.25,0.125 -3.13,0 -6.07,-0.3475 -8.5,-0.6875 -2.42,-0.34 -4.3375,-0.7125 -5.4375,-0.8125 -0.19,-0.01 -0.36125,0 -0.53125,0 -0.77,0.04 -1.25125,0.1675 -1.53125,0.4375 -0.27,0.26 -0.36625,0.64 -0.40625,1.25 0,0.34 0.05625,0.7375 0.15625,1.1875 0.75,3.49 1.51375,10.38625 2.09375,17.15625 0.59,6.77 0.96875,13.41375 0.96875,16.34375 0,0.34 0.01,0.635 0,0.875 -0.09,1.96 -0.0775,3.21125 -0.1875,4.78125 -0.02,0.23 -0.03125,0.46625 -0.03125,0.65625 0,0.47 0.06875,0.73625 0.21875,0.90625 0.15,0.16 0.49125,0.34375 1.28125,0.34375 0.32,0 0.7275,-0.0337 1.1875,-0.0937 1.69,-0.24 6.63875,-0.59625 11.96875,-0.90625 5.33,-0.32 11.04,-0.575 14.25,-0.625 0.43,-0.01 0.87375,-0.0312 1.34375,-0.0312 3.22,0.01 7.10875,0.175 10.46875,0.375 3.36,0.2 6.19125,0.445 7.28125,0.625 0.55,0.09 1.0375,0.15625 1.4375,0.15625 0.54,-0.05 0.8525,-0.0813 1.0625,-0.28125 0.2,-0.2 0.29375,-0.56 0.34375,-1.25 l 0,-0.40625 c -0.09,-1.25 -0.8425,-7.87875 -1.5625,-14.71875 -0.73,-6.84 -1.42875,-13.89125 -1.46875,-16.03125 -0.03,-2.1 -0.03125,-4.61875 -0.03125,-6.71875 l 0,-3.46875 0,-0.78125 c -0.01,-0.18 -0.08375,-0.30875 -0.34375,-0.46875 -0.26,-0.16 -0.71125,-0.28125 -1.28125,-0.28125 z m 110.874995,2.75 c 0.021,1.252 0.0658,2.667 0.0937,4.125 0.07,3.18 0.125,6.53125 0.125,8.53125 0,3.91 2.5275,21.1 3.1875,23.25 0.44,1.43 0.625,2.5025 0.625,3.3125 0,0.469 -0.084,0.8545 -0.25,1.1875 17.852,0.021 29.8695,0.0312 30.0625,0.0312 0.7,-0.01 1.271,-0.0863 1.5,-0.65625 0.72,-2.85 10.0275,-36.79375 10.4375,-37.84375 0.229,-0.51 0.48875,-1.28625 0.96875,-1.90625 -10.11,-0.01 -26.887,-0.0312 -46.75,-0.0312 z m -178.499995,0.0312 c -3.27,0.01 -11.5525002,0.0625 -11.5625002,0.0625 l -0.0625,-0.0312 -0.15625,0 c -0.48,0.04 -1.42375,0.085 -1.59375,1.375 -0.01,0.11 -0.0312499986,0.77 -0.0312499986,1.75 0,9.95 1.1024999986,56.745 1.5624999986,60.375 0.49,4 4.09375,17.654 4.59375,19.125 0.25,0.76 0.445,1.2275 0.625,1.4375 0.17,0.19 0.2375,0.229 0.6875,0.25 l 12.5625002,0 c 0.13,0.04 0.45875,-0.235 0.71875,-0.875 0.27,-0.611 0.46375,-1.41125 0.59375,-2.03125 0.26,-1.31 6.88625,-31.50375 7.40625,-33.34375 0.01,-0.05 0.0425,-0.1285 0.0625,-0.1875 0.05,-0.23 0.0625,-0.46875 0.0625,-0.71875 0.01,-1.32 -0.73875,-2.87 -1.21875,-4.5 -0.98,-3.29 -10.1775,-39.18875 -10.6875,-40.96875 -0.46,-1.38 -0.645,-1.5175 -1.625,-1.6875 l -1.9375,0 0,-0.0312 z m 70.25,0 0,2.21875 c -0.001,2.099 -0.0088,4.61875 0.03125,6.71875 0.03,2.07 0.74875,9.0975 1.46875,15.9375 0.72,6.84 1.4725,13.47 1.5625,14.75 l 0,0.46875 c 0,0.057 0.002,0.10125 0,0.15625 0.535,0 1.05475,-10e-4 1.59375,0 0.012,-0.351 0.0385,-0.69875 0.0625,-0.96875 0.02,-0.17 0.02125,-0.61125 0.03125,-1.28125 0.01,-0.68 0.03125,-1.565 0.03125,-2.625 0,-1.52 -0.0125,-3.42125 -0.0625,-5.53125 -0.05,-2.12 -0.13,-4.45625 -0.25,-6.90625 -0.45,-8.78 -1.4775,-18.87125 -2.1875,-22.53125 -0.025,-0.137 -0.01925,-0.28025 -0.03125,-0.40625 -0.752,0 -1.505,-0.001 -2.25,0 z m 54.656245,0 c 0.045,1.304 0.875,10.76775 0.875,14.84375 -10e-4,2.05 0.444,7.25125 0.875,12.28125 0.43,5.03 0.8775,9.855 0.9375,11.125 0.01,0.16 0,0.30875 0,0.46875 0,0.613 -0.084,1.13875 -0.25,1.59375 l 1.375,0 c -0.041,-0.267 -0.0625,-0.51925 -0.0625,-0.78125 0,-0.69 0.085,-1.3625 0.125,-1.8125 0.01,-0.12 0.0312,-0.6825 0.0312,-1.5625 l 0,-1.1875 c 0,-3.69 -0.0962,-10.42375 -0.40625,-16.59375 -0.38,-7.71 -2.0175,-14.5975 -2.4375,-17.9375 -0.02,-0.164 -0.0495,-0.2875 -0.0625,-0.4375 l -1,0 z m 101.96875,0 0,0.0937 c -0.64,-0.1 -1.29625,1.1775 -1.65625,2.1875 -0.33,0.8 -9.415,33.8 -10.375,37.5 l 0.0312,0 c -0.02,0.09 -0.0537,0.19125 -0.0937,0.28125 0,0.04 -0.0203,0.0738 -0.0312,0.0937 l 0,0.0312 c -0.04,0.14 0.3025,0.68375 1.0625,1.34375 0.74,0.66 1.80375,1.48125 3.09375,2.53125 0.75,0.62 1.47,1.19875 2,1.96875 0.25,-1.26 0.81625,-2.465 1.15625,-3.625 0.95,-3.23 10.14625,-39.14875 10.65625,-40.96875 0.141,-0.58 0.345,-1.02625 0.625,-1.40625 -1.49,0 -3.66875,-0.0312 -6.46875,-0.0312 z m 9.3125,0 c -0.24,0 -0.46625,0.0112 -0.65625,0.0312 -0.04,0 -0.1375,0.01 -0.1875,0 -1,0.17 -1.19625,0.3075 -1.65625,1.6875 -0.5,1.79 -9.7165,37.68875 -10.6875,40.96875 -0.489,1.63 -1.22975,3.21125 -1.21875,4.53125 0,0.23 0.0135,0.43625 0.0625,0.65625 0.011,0.05 0.0425,0.1075 0.0625,0.1875 0.288,1.009 2.358,10.35825 4.25,18.90625 l 22.3125,-0.0312 c 0.299,-1.404 0.525,-2.60325 0.625,-3.40625 0.449,-3.64 1.5625,-50.69875 1.5625,-60.46875 0,-0.94 -0.0113,-1.55625 -0.0312,-1.65625 -0.17,-1.29 -1.10375,-1.335 -1.59375,-1.375 l -0.125,0 -0.0312,0 -0.0625,0 c -0.01,0 -10.835,-0.0312 -12.625,-0.0312 z m -232.281245,0.0313 c 0.27,0.37 0.485,0.83625 0.625,1.40625 0.52,1.82 9.7175,37.73875 10.6875,40.96875 0.35,1.24 0.93625,2.525 1.15625,3.875 0.55,-0.9 1.32625,-1.53875 2.15625,-2.21875 0.863,-0.708 1.63925,-1.31475 2.28125,-1.84375 -0.27,-0.426 -0.34375,-0.88675 -0.34375,-1.34375 -10e-4,-0.229 0.01125,-0.48875 0.03125,-0.71875 0.11,-1.53 0.0975,-2.77 0.1875,-4.75 0.01,-0.22 0.03125,-0.51375 0.03125,-0.84375 0,-0.511 -0.0072,-1.147 -0.03125,-1.875 -2.964,-10.869 -8.1895,-29.80225 -8.4375,-30.40625 -0.36,-1.01 -1.01625,-2.2875 -1.65625,-2.1875 l 0,-0.0625 -6.6875,0 z m 8.28125,0 c 0.47,0.61 0.73875,1.365 0.96875,1.875 0.272,0.685 4.29625,15.2825 7.28125,26.1875 -0.173,-2.9 -0.42175,-6.32525 -0.71875,-9.78125 -0.59,-6.761 -1.3325,-13.63125 -2.0625,-17.03125 -0.098,-0.443 -0.1755,-0.863 -0.1875,-1.25 -2.104,0.001 -3.87925,-10e-4 -5.28125,0 z m 144.624995,39.5625 c -2.229,0 -5.752,0.324 -9.5,0.75 8.443,0.01 16.52475,0.0222 23.96875,0.0312 -0.547,-0.044 -1.08925,-0.082 -1.65625,-0.125 -4.63,-0.349 -9.7725,-0.65625 -12.8125,-0.65625 z m 57.21875,1.4375 c -0.52,0.34 -1.14375,0.375 -1.59375,0.375 l -0.0937,0 c -0.332,0 -34.1505,-0.0448 -72.9375,-0.0937 -3.522,0.475 -6.429,0.9135 -7.625,1.0625 -0.21,0.03 -0.40375,0.0312 -0.59375,0.0312 l -0.0625,0 c -0.94,0 -1.65125,-0.37875 -2.03125,-0.96875 -0.027,-0.042 -0.0375,-0.082 -0.0625,-0.125 l -2.34375,0 c -0.419,0.326 -0.9675,0.46875 -1.5625,0.46875 -0.33,0 -0.6825,-0.0238 -1.0625,-0.0937 -0.601,-0.117 -2.08925,-0.246 -4.03125,-0.375 -7.95,-0.01 -15.91125,-0.0213 -23.65625,-0.0312 -2.087,0.252 -4.323,0.557 -6.5,0.875 -5.129995,0.76 -9.921245,1.57125 -11.531245,1.78125 -0.19,0.02 -0.36125,0.0312 -0.53125,0.0312 l -0.15625,0 c -1.08,0 -1.86,-0.4975 -2.25,-1.1875 -0.283,-0.483 -0.41775,-1.00925 -0.46875,-1.53125 -0.601,0 -1.18725,10e-4 -1.78125,0 -0.107,0.316 -0.273,0.5905 -0.5,0.8125 -0.47,0.44 -1.09,0.5625 -1.75,0.5625 -0.49,0 -1.045,-0.0875 -1.625,-0.1875 -2.01,-0.34 -11.06625,-0.9375 -17.40625,-0.9375 l -0.15625,0 c -0.46,0 -0.92375,-0.01 -1.34375,0 -3.17,0.05 -8.8675,0.315 -14.1875,0.625 -5.33,0.31 -10.28625,0.66625 -11.90625,0.90625 -0.5,0.07 -0.9325,0.0937 -1.3125,0.0937 -0.561,0 -0.998,-0.085 -1.375,-0.25 -0.682,0.569 -1.5125,1.20975 -2.4375,1.96875 -0.92,0.76 -1.58125,1.32625 -2.03125,2.15625 0.5,-0.13 1.1225,-0.1775 1.8125,-0.1875 l 0.40625,0 c 1.52,0.03 50.4,0.0625 99.249995,0.0625 48.84,0 97.69775,-0.0325 99.21875,-0.0625 l 0.4375,0 c 0.84,0.01 1.565,0.0813 2.125,0.28125 -0.44,-0.88 -1.14375,-1.47 -2.09375,-2.25 -1.28,-1.05 -2.36625,-1.8525 -3.15625,-2.5625 -0.47,-0.44 -0.85375,-0.84 -1.09375,-1.25 z M 32.281225,525.0974 c -1.6,0 -2.21,0.34625 -2.25,0.65625 l 0,0.0625 c -0.15,1 -6.89,33.1525 -7.5,35.0625 -0.05,0.159 -0.0625,0.286 -0.0625,0.375 0.02,0.2 0.02875,0.2015 0.21875,0.3125 0.19,0.08 0.5775,0.10375 0.9375,0.0937 0.37,0 0.71,-0.0312 1,-0.0312 l 157.156245,0 -0.125,-17.25 56.15625,-0.125 c -1.864,-8.812 -3.77075,-17.9125 -3.84375,-18.4375 -0.01,-0.04 0.011,-0.0425 0,-0.0625 -0.029,-0.31 -0.6515,-0.65625 -2.3125,-0.65625 l -0.40625,0 c -1.56,0.03 -50.39,0.0625 -99.25,0.0625 -48.859995,0 -97.679995,-0.0225 -99.249995,-0.0625 -0.14,-0.01 -0.27625,0 -0.40625,0 l -0.0625,0 z m 262.124995,20.03125 -109.59375,0.25 23.3125,9 117.8125,0.25 -31.53125,-9.5 z m -111.75,0.5 0.1875,27.3125 2.4375,1.71875 0.25,-22.09375 6.5625,3 12.9375,5.46875 0.1875,28.15625 2.4375,1.84375 -0.125,-35.8125 -24.875,-9.59375 z m 3.875,8.5 -0.28125,21 4.71875,0 0.40625,-18.78125 -4.84375,-2.21875 z m 22,1.25 0.125,36.15625 7.53125,0 -0.34375,-28.6875 72.71875,-0.40625 3.5,0 4.8125,-0.0312 20.53125,-0.0937 4.5,0 0.125,29.21875 6.5,0 0.3125,-35.90625 -120.3125,-0.25 z m -16.15625,1.40625 -0.0937,4.84375 11.625,0 -11.53125,-4.84375 z m -182.093745,5.90625 0,9.53125 c 0.03,0.019 0.04375,0.0638 0.09375,0.0937 0.2,0.1 0.67125,0.25 1.53125,0.25 1.01,0 1.35875,-0.19125 1.46875,-0.28125 l 0,-9.59375 -3.09375,0 z m 307.124995,0.625 0.0937,25.40625 3.53125,2.375 -0.125,-27.78125 -3.5,0 z m -21,0.0937 -3.8125,0.0312 0.0312,11.6875 3.9375,-0.0937 -0.15625,-11.625 z m -7.34375,0.0312 0.0625,9.625 2.5,1.65625 -0.0312,-11.28125 -2.53125,0 z m -39.875,0.21875 0,8.625 c 0.01,0.01 0.0315,0.0113 0.0625,0.0312 0.16,0.09 0.54625,0.25 1.40625,0.25 1.04,0 1.475,-0.23375 1.625,-0.34375 l 0,-8.5625 -3.09375,0 z";
  var isiPad = navigator.userAgent.match(/iPad/i) != null;
  var pg_roomHeight = 240;
  var pg_infoHeight = 240;

  // luxD = distance for lux value
  // minD = minimum room height
  // maxD = maximum room height
  // initD = initial room height
  // kelvin = color temperature in kelvin
  // every height value is in cm: 500 == 5 meters
  return function pg_init(id, angle, lux, luxD, minD, maxD, initD, kelvin) {

  	var pgObj = jQuery( "#"+id+"_pg" );
  	var sliderObj = jQuery( "#"+id+"_slider" );
  	var sliderObjs = jQuery( ".pg_slider" );
  	var roomHeightInputObj = jQuery('#'+id+'_input');
  	var roomHeightInputObjs = jQuery('.pg_input');

  	var initial_roomHeight = initD;
  	var initial_infoHeight = initial_roomHeight; // infoText should start at floor

  	pg_roomHeight = initial_roomHeight;
  	pg_infoHeight = initial_infoHeight;

  	var canvas = pg_draw(id, angle, lux, luxD, minD, maxD, kelvin, initial_roomHeight, initial_infoHeight);

  	//DONE fix slider not moving  ->  happens when min, max and value are not valid type or range
  	//DONE fix slider wrong start pos ->  happens when min, max and value are not valid type or range
  	sliderObj.slider({
  	  orientation: "vertical",
  	  min: 0, //minimum measurable distance = 10 cm
  	  max: initial_roomHeight-10,
  	  value: 0,
      step:5,

  	  // executed on every slider after any value change
  	  change: function( event, ui ) {
  		  var slider_value = parseInt(ui.value);
            pg_infoHeight = calculate_infoHeight(slider_value, pg_roomHeight);
  		  pg_update_draw(id, angle, lux, luxD, minD, maxD, kelvin, pg_roomHeight, pg_infoHeight, canvas);
  	  },

  	  // only executed on the actively moved slider
  	  slide: function( event, ui ) {
  		  var slider_value = parseInt(ui.value);
  		  pg_infoHeight = calculate_infoHeight(slider_value, pg_roomHeight);
  		  pg_update_draw(id, angle, lux, luxD, minD, maxD, kelvin, pg_roomHeight, pg_infoHeight, canvas);
  		  pg_update_others(sliderObjs, roomHeightInputObjs, slider_value);
  	  }

  	});

  	//sets initial room height
  	roomHeightInputObj.val((initial_roomHeight*0.01).toFixed(2));
		roomHeightInputObj.on('change',function(){
      var maxD10=maxD*0.01;
      var minD10=minD*0.01;
			var value = parseFloat(roomHeightInputObj.val());
			value = isNaN(value) ? initial_roomHeight*0.01 : value;
			value = value > maxD10 ? maxD10 : value;
			value = value < minD10 ? minD10 : value;
			pg_roomHeight = parseInt(value*100);

			// update slider on room height change

			pg_infoHeight = pg_roomHeight;


			var slider_value = calculate_slider_value(pg_infoHeight, pg_roomHeight);
      sliderObj.slider('value', slider_value)
			sliderObj.slider( "option", "max", pg_roomHeight-10 );

			pg_update_draw(id, angle, lux, luxD, minD, maxD, kelvin, pg_roomHeight, pg_infoHeight, canvas);

			pg_update_others(sliderObjs, roomHeightInputObjs, sliderObj.slider("value"));
		});

  	// when the product variant is switched, the current values need to be transferred to the newly activated instance of the product generator
  	pgObj.on('update', function () {

  		// update slider at newly activated instance of the product generator
  	    var slider_value = calculate_slider_value(pg_infoHeight, pg_roomHeight);
          sliderObj.slider('value', slider_value);

  		// update roomheight at newly activated instance of the product generator
  		roomHeightInputObj.val((pg_roomHeight*0.01).toFixed(2))

  		pg_update_draw(id, angle, lux, luxD, minD, maxD, kelvin, pg_roomHeight, pg_infoHeight, canvas);
  	});

    jQuery(window).resize(function(){
      pg_update_draw(id, angle, lux, luxD, minD, maxD, kelvin, pg_roomHeight, pg_infoHeight, canvas);
    })

  }

  function pg_update_others(sliderObjs, roomHeightInputObjs, slider_value) {
  	roomHeightInputObjs.val((pg_roomHeight*0.01).toFixed(2));
    sliderObjs.slider('value', slider_value);
    sliderObjs.slider( "option", "max", pg_roomHeight-10 );
  }


  // invert inverted value  back
  function calculate_slider_value(infoHeight, roomHeight) {
  	return roomHeight - infoHeight;
  }

  // inverting slider value
  function calculate_infoHeight(slider_value, roomHeight) {
  	return roomHeight  - slider_value;
  }


  function pg_update_draw(id, angle, lux, luxD, minD, maxD, kelvin, roomHeight, infoHeight, canvas) {
  				pg_draw(id, angle, lux, luxD, minD, maxD, kelvin, roomHeight, infoHeight, canvas);
  }


  function pg_draw(id, angle, lux, luxD, minD, maxD, kelvin, roomHeight, infoHeight, canvas) {

    if(typeof canvas ==='undefined'|| canvas === null ){
      canvas = SVG(id + '_drawing').fixSubPixelOffset();
    } else {
      canvas.clear();
    }
    var svgElement = jQuery(canvas.node);
    var color = getColorFromTemperature(kelvin);
    var lineColor = "pg_line_color_dark_bg";
    var fillColor = "pg_fill_color_dark_bg";
    if(new SVG.Color(color).brightness()>0.82){
        lineColor ='pg_line_color_light_bg';
        fillColor = "pg_fill_color_light_bg";
    }
    //define room
    var roomInfo =getRoomPoints(svgElement);
    var roomGroup= canvas.group();
    roomGroup.polyline(roomInfo.topLinePlot).addClass('pg_line_color_dark_bg').fill('transparent');
    roomGroup.polyline(roomInfo.bottomLinePlot).addClass('pg_line_color_dark_bg').fill('transparent');
    var p=roomInfo.rightLinePoints;
    roomGroup.line(p.x1,p.y1,p.x2,p.y2).addClass('pg_line_color_dark_bg');
    p=roomInfo.leftLinePoints;
    roomGroup.line(p.x1,p.y1,p.x2,p.y2).addClass('pg_line_color_dark_bg');

    // define beam
    var beamHeight = svgElement.height();
    var beamGroundHeight = svgElement.height() * 0.2;
    beamHeight -= svgElement.height()*0.18;
    var beamGroup = canvas.group();
    var beamInfo = getPointsForBeam(angle, beamHeight);

    var beamGround = beamGroup.ellipse(beamInfo.width,beamGroundHeight)
                              .move(-beamInfo.width/2 ,beamInfo.height -beamGroundHeight/2)
                              .fill(canvas.gradient('radial',function(stop){
                                stop.at(0.2,new SVG.Color(color).morph("#fff").at(0.4));
                                stop.at(1,new SVG.Color(color).morph("#fff").at(0.4),0.2);
                              }));
    // calculate scaleFactor from roomHeight defines conversionratio between pixel and meters
    var scaleFactor = beamHeight / roomHeight;

    // define heightRef e.g. chair
    // append from external SVG file
    var realHeightRefHeight =90;
    var heighRefGroup =beamGroup.group();
    if(!isiPad){
      var heightRefFill = heighRefGroup.path(heightRefFillPath).addClass('pg_height_ref_fill');
      var heightRefStroke = heighRefGroup.path(heightRefStrokePath).addClass('pg_height_ref_stroke');

      resizeHeightRef(roomHeight,heightRefFill,realHeightRefHeight,beamHeight,scaleFactor);
      resizeHeightRef(roomHeight,heightRefStroke,realHeightRefHeight,beamHeight,scaleFactor);
    }
    var beam = beamGroup.polygon(beamInfo.plot);
    var beamMask = beam.clone();
    beam.fill(canvas.gradient('linear',function(stop){stop.at(0.3,color);stop.at(1,color,0);}).from(0, 0).to(0, 1));

    var beamAngle= beamGroup.circle(100).center(0,0).addClass(lineColor+" pg_angle_circle").fill("transparent").maskWith(beamMask.fill("#fff"));

    var angleText =beamGroup.text(angle+"˚").addClass("pg_text "+fillColor).move(-40,10);


    // define center line
    var heightLine = beamGroup.line(0,0,0,beamInfo.height).addClass(lineColor) ;
    heightLine.marker('start',8,20,function(add){
      add.circle(5).center(4,10).addClass(fillColor);
      add.ellipse(6,18).center(4,10).stroke({width:1.5}).addClass(lineColor).fill("transparent");
      });

    heightLine.marker('end',5,5,function(add){add.circle(5).addClass(fillColor);});

    //define lux infoText
    var infoGroup =beamGroup.group();
    var infoTextOffsetX =svgElement.width()/2*0.2;
    var diameter = getPointsForBeam(angle,infoHeight).width;
    var infoText =infoGroup.text(function(add){
      add.tspan(luxAtD(lux,luxD, infoHeight) + " lux").newLine();
      add.tspan("Ø "+(diameter*0.01).toFixed(2)+" m").newLine();
      add.tspan("at " + (infoHeight*0.01).toFixed(2)  + " m").newLine();
      });
    infoText.addClass("pg_text "+fillColor);
    var infoTextObj =jQuery(infoText.node);
    infoText.move(infoTextOffsetX,-infoTextObj.height()/2);
    var b =infoText.bbox();
    infoGroup.rect(b.width+10, b.height+10).
        move(b.x-5, b.y-5).addClass("pg_text_bg").backward();


    infoGroup.line(0,0,infoTextOffsetX-5,0).addClass(lineColor);

    infoGroup.move(0, infoHeight*scaleFactor);

    beamGroup.move(svgElement.width()/2, beamGroundHeight*0.4);

   //TODO only rerender moving objects
   //TODO rerender all on screensize change
    return canvas;

  }

  function resizeHeightRef(roomHeight,heightRef,realHeightRefHeight,beamHeight,scaleFactor){
    var heightRefHeight = heightRef.height();
    //scale heightRef to roomHeight
    if(typeof roomHeight !='undefined' && roomHeight !== null && roomHeight != 0 && heightRefHeight != 0 ) {
      heightRef.size(heightRef.width() * realHeightRefHeight/heightRefHeight, heightRefHeight * realHeightRefHeight/heightRefHeight);
      heightRef.size(heightRef.width() * scaleFactor, heightRef.height() * scaleFactor);
      heightRef.move(-heightRef.width()*0.35, beamHeight-heightRef.height()+10);
    }
  }

  function getRoomPoints(svgElement){
    var height= svgElement.height();
    var width= svgElement.width();
    var verticalOffset = height*0.18;
    var horizontalOffset =width*0.15;
    var topLine =[[0,0],[horizontalOffset,verticalOffset],[width-horizontalOffset,verticalOffset],[width,0]];
    var bottomLine =[[0,height],[horizontalOffset,height-verticalOffset],[width-horizontalOffset,height-verticalOffset],[width,height]];
    var leftLine ={x1:horizontalOffset,y1:verticalOffset,x2:horizontalOffset,y2:height-verticalOffset};
    var rightLine ={x1:width-horizontalOffset,y1:verticalOffset,x2:width-horizontalOffset,y2:height-verticalOffset};
    return {
      topLinePlot:topLine,
      bottomLinePlot:bottomLine,
      leftLinePoints:leftLine,
      rightLinePoints:rightLine
      };
  }

  function getPointsForBeam(angle,height){
    //convert to radians by multiplying with (Math.PI/180)
    var beta = angle/2 * (Math.PI/180);
    var a = height;
    var b = Math.tan(beta) *a;
    return {plot:[[0,0],[b,a],[-b,a]],width:b*2,height:a};

  }

  function getColorFromTemperature (tempKelvin){
    tempKelvin = tempKelvin <1000 ? 1000 : tempKelvin;
    tempKelvin = tempKelvin >40000 ? 40000 : tempKelvin;
    tempKelvin /=100
    var red=0;
    var green =0;
    var blue=0;
    var temperatureCalc =0;
    if(tempKelvin <= 66){
      red =255;
    }else{
      temperatureCalc = tempKelvin -60;
      temperatureCalc =329.69872446 * Math.pow(temperatureCalc , -0.1332047592);
      red = temperatureCalc;
      red = red <0 ? 0 : red;
      red = red > 255 ? 255 : red;
    }

    if(tempKelvin <= 66){
      temperatureCalc =tempKelvin;
      temperatureCalc = 99.4708025861 * Math.log(temperatureCalc) - 161.1195681661;
      green =temperatureCalc;

    }else{
      temperatureCalc = tempKelvin - 60;
      temperatureCalc = 288.1221695283 * Math.pow(temperatureCalc , -0.0755148492);
      green = temperatureCalc;
    }
    green = green <0 ? 0 : green;
    green = green > 255 ? 255 : green;

    if(tempKelvin >=66){
      blue =255;
    }else if(tempKelvin <=19){
      blue =0;
    }else{
      temperatureCalc = tempKelvin - 10
      temperatureCalc = 138.5177312231 * Math.log(temperatureCalc) - 305.0447927307

      blue = temperatureCalc
      blue = blue <0 ? 0 : blue;
      blue = blue > 255 ? 255 : blue;
    }

    return {r:Math.floor(red),g:Math.floor(green),b:Math.floor(blue)};
  }
})(jQuery,SVG);
